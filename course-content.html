<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Strubbenda Test ‚Äî Mayurbhanj Initiative</title>
  <meta name="description" content="Explore course chapters and lessons.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="course-content.css">
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='80'>üèõÔ∏è</text></svg>">
</head>
<body>

  <!-- ===== NAVBAR ===== -->
  <nav class="navbar">
    <div class="navbar-left">
      <div class="navbar-logo">
        <img src="https://upload.wikimedia.org/wikipedia/commons/f/fe/Seal_of_Odisha.png" alt="Odisha Government Emblem">
      </div>
      <div class="navbar-title">
        <span class="navbar-title-main">Medhavi Mayurbhanj</span>
        <span class="navbar-title-sub">An Initiative of District Administration</span>
      </div>
    </div>

    <div class="navbar-right">
      <!-- Language Toggle -->
      <div class="lang-toggle">
        <button class="lang-btn active" data-lang="en">English</button>
        <button class="lang-btn" data-lang="od">‡¨ì‡¨°‡¨º‡¨ø‡¨Ü</button>
      </div>

    </div>
  </nav>

  <!-- ===== MAIN LAYOUT ===== -->
  <div class="course-layout">

    <!-- ===== SIDEBAR ===== -->
    <aside class="sidebar" id="sidebar">
      <!-- Sidebar Header -->
      <div class="sidebar-header">
        <a href="exam-achievers.html" class="sidebar-back" aria-label="Go back">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <line x1="19" y1="12" x2="5" y2="12"/>
            <polyline points="12 19 5 12 12 5"/>
          </svg>
        </a>
        <svg class="sidebar-header-icon" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
          <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
        </svg>
        <span class="sidebar-header-title">Strubbenda Test</span>
      </div>

      <!-- Chapters List -->
      <nav class="chapters-nav">

        <!-- Chapter 1 (expanded by default) -->
        <div class="chapter" data-chapter="1">
          <button class="chapter-toggle active" aria-expanded="true">
            <span class="chapter-name">01. Locating Places on the Earth</span>
            <svg class="chapter-arrow" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"/>
            </svg>
          </button>
          <ul class="lesson-list active">
            <li class="lesson-item" data-type="video">
              <svg class="lesson-icon lesson-icon-video" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="5 3 19 12 5 21 5 3"/>
              </svg>
              Video
            </li>
            <li class="lesson-item" data-type="doc">
              <svg class="lesson-icon lesson-icon-doc" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="9" y1="13" x2="15" y2="13"/>
                <line x1="9" y1="17" x2="13" y2="17"/>
              </svg>
              Chapter Teaching Plan
            </li>
            <li class="lesson-item" data-type="doc">
              <svg class="lesson-icon lesson-icon-doc" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="9" y1="13" x2="15" y2="13"/>
                <line x1="9" y1="17" x2="13" y2="17"/>
              </svg>
              Lesson 1: Maps and Its Types
            </li>
            <li class="lesson-item" data-type="doc">
              <svg class="lesson-icon lesson-icon-doc" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="9" y1="13" x2="15" y2="13"/>
                <line x1="9" y1="17" x2="13" y2="17"/>
              </svg>
              Lesson 2: Scale and Distance
            </li>
            <li class="lesson-item" data-type="doc">
              <svg class="lesson-icon lesson-icon-doc" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="9" y1="13" x2="15" y2="13"/>
                <line x1="9" y1="17" x2="13" y2="17"/>
              </svg>
              Lesson 3: Directions and Symbols
            </li>
            <li class="lesson-item" data-type="link">
              <svg class="lesson-icon lesson-icon-link" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                <polyline points="15 3 21 3 21 9"/>
                <line x1="10" y1="14" x2="21" y2="3"/>
              </svg>
              External: Interactive Map Explorer
            </li>
            <li class="lesson-item" data-type="doc">
              <svg class="lesson-icon lesson-icon-doc" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="9" y1="13" x2="15" y2="13"/>
                <line x1="9" y1="17" x2="13" y2="17"/>
              </svg>
              Worksheet 1: Maps, Types of Maps, Components of Maps
            </li>
            <li class="lesson-item" data-type="doc">
              <svg class="lesson-icon lesson-icon-doc" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="9" y1="13" x2="15" y2="13"/>
                <line x1="9" y1="17" x2="13" y2="17"/>
              </svg>
              Lesson 4: Latitudes and Longitudes
            </li>
            <li class="lesson-item" data-type="video">
              <svg class="lesson-icon lesson-icon-video" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="5 3 19 12 5 21 5 3"/>
              </svg>
              Video: Latitudes &amp; Longitudes Explained
            </li>
            <li class="lesson-item" data-type="doc">
              <svg class="lesson-icon lesson-icon-doc" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="9" y1="13" x2="15" y2="13"/>
                <line x1="9" y1="17" x2="13" y2="17"/>
              </svg>
              Worksheet 2: Latitudes and Longitudes
            </li>
            <li class="lesson-item" data-type="doc">
              <svg class="lesson-icon lesson-icon-doc" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="9" y1="13" x2="15" y2="13"/>
                <line x1="9" y1="17" x2="13" y2="17"/>
              </svg>
              Lesson 5: Importance of Latitudes and Longitudes
            </li>
            <li class="lesson-item" data-type="link">
              <svg class="lesson-icon lesson-icon-link" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                <polyline points="15 3 21 3 21 9"/>
                <line x1="10" y1="14" x2="21" y2="3"/>
              </svg>
              External: World Time Zone Map
            </li>
            <li class="lesson-item" data-type="doc">
              <svg class="lesson-icon lesson-icon-doc" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="9" y1="13" x2="15" y2="13"/>
                <line x1="9" y1="17" x2="13" y2="17"/>
              </svg>
              Lesson 6: International Date Line and Global Time
            </li>
            <li class="lesson-item" data-type="doc">
              <svg class="lesson-icon lesson-icon-doc" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="9" y1="13" x2="15" y2="13"/>
                <line x1="9" y1="17" x2="13" y2="17"/>
              </svg>
              Worksheet 3: Time and Time Zones
            </li>
          </ul>
        </div>

        <!-- Chapter 2 -->
        <div class="chapter" data-chapter="2">
          <button class="chapter-toggle" aria-expanded="false">
            <span class="chapter-name">02. Understanding Diversity</span>
            <svg class="chapter-arrow" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"/>
            </svg>
          </button>
          <ul class="lesson-list">
            <li class="lesson-item" data-type="video">
              <svg class="lesson-icon lesson-icon-video" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="5 3 19 12 5 21 5 3"/>
              </svg>
              Video
            </li>
            <li class="lesson-item" data-type="doc">
              <svg class="lesson-icon lesson-icon-doc" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="9" y1="13" x2="15" y2="13"/>
                <line x1="9" y1="17" x2="13" y2="17"/>
              </svg>
              Lesson 1: Unity in Diversity
            </li>
            <li class="lesson-item" data-type="doc">
              <svg class="lesson-icon lesson-icon-doc" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="9" y1="13" x2="15" y2="13"/>
                <line x1="9" y1="17" x2="13" y2="17"/>
              </svg>
              Lesson 2: Diversity and Discrimination
            </li>
            <li class="lesson-item" data-type="link">
              <svg class="lesson-icon lesson-icon-link" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                <polyline points="15 3 21 3 21 9"/>
                <line x1="10" y1="14" x2="21" y2="3"/>
              </svg>
              External: Cultural Diversity Resources
            </li>
          </ul>
        </div>

        <!-- Chapter 3 -->
        <div class="chapter" data-chapter="3">
          <button class="chapter-toggle" aria-expanded="false">
            <span class="chapter-name">03. Grassroots Democracy - Local Government in Rural Areas</span>
            <svg class="chapter-arrow" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"/>
            </svg>
          </button>
          <ul class="lesson-list">
            <li class="lesson-item" data-type="video">
              <svg class="lesson-icon lesson-icon-video" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="5 3 19 12 5 21 5 3"/>
              </svg>
              Video
            </li>
            <li class="lesson-item" data-type="doc">
              <svg class="lesson-icon lesson-icon-doc" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="9" y1="13" x2="15" y2="13"/>
                <line x1="9" y1="17" x2="13" y2="17"/>
              </svg>
              Lesson 1: Panchayati Raj
            </li>
            <li class="lesson-item" data-type="doc">
              <svg class="lesson-icon lesson-icon-doc" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="9" y1="13" x2="15" y2="13"/>
                <line x1="9" y1="17" x2="13" y2="17"/>
              </svg>
              Lesson 2: Rural Administration
            </li>
            <li class="lesson-item" data-type="link">
              <svg class="lesson-icon lesson-icon-link" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                <polyline points="15 3 21 3 21 9"/>
                <line x1="10" y1="14" x2="21" y2="3"/>
              </svg>
              External: Panchayati Raj Portal
            </li>
          </ul>
        </div>

        <!-- Chapter 4 -->
        <div class="chapter" data-chapter="4">
          <button class="chapter-toggle" aria-expanded="false">
            <span class="chapter-name">04. Economic Activities Around Us</span>
            <svg class="chapter-arrow" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="6 9 12 15 18 9"/>
            </svg>
          </button>
          <ul class="lesson-list">
            <li class="lesson-item" data-type="video">
              <svg class="lesson-icon lesson-icon-video" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="5 3 19 12 5 21 5 3"/>
              </svg>
              Video
            </li>
            <li class="lesson-item" data-type="doc">
              <svg class="lesson-icon lesson-icon-doc" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="9" y1="13" x2="15" y2="13"/>
                <line x1="9" y1="17" x2="13" y2="17"/>
              </svg>
              Lesson 1: Livelihoods and Occupations
            </li>
            <li class="lesson-item" data-type="link">
              <svg class="lesson-icon lesson-icon-link" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
                <polyline points="15 3 21 3 21 9"/>
                <line x1="10" y1="14" x2="21" y2="3"/>
              </svg>
              External: Economic Survey of India
            </li>
          </ul>
        </div>

      </nav>

      <!-- User Info & Logout -->
      <div class="sidebar-footer">
        <div class="sidebar-user">
          <div class="sidebar-user-avatar" id="userAvatar">AS</div>
          <div class="sidebar-user-info">
            <span class="sidebar-user-name" id="userName">Ayush Sharma</span>
            <span class="sidebar-user-role">Teacher</span>
          </div>
        </div>
        <a href="index.html" class="logout-btn" id="logoutBtn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
            <polyline points="16 17 21 12 16 7"/>
            <line x1="21" y1="12" x2="9" y2="12"/>
          </svg>
          Logout
        </a>
      </div>
    </aside>

    <!-- ===== MAIN CONTENT ===== -->
    <main class="course-main" id="courseMain">
      <div class="welcome-state">
        <div class="welcome-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--green-primary)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
            <line x1="9" y1="7" x2="15" y2="7"/>
            <line x1="9" y1="11" x2="15" y2="11"/>
          </svg>
        </div>
        <h2 class="welcome-heading" id="welcomeHeading">Welcome to<br>Course Content</h2>
        <p class="welcome-text">Select a chapter from the sidebar to begin exploring the course content.</p>
        <div class="welcome-tip">
          <strong>Tip:</strong> Click on any chapter to expand it and see available lessons.
        </div>
      </div>
    </main>

  </div>

  <!-- ===== COMPLETION CONFIRMATION MODAL ===== -->
  <div class="confirm-overlay" id="confirmModal">
    <div class="confirm-modal">
      <div class="confirm-icon">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="var(--green-primary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
          <polyline points="22 4 12 14.01 9 11.01"/>
        </svg>
      </div>
      <h3 class="confirm-heading">Lesson Completed?</h3>
      <p class="confirm-text">Have you completed <strong id="confirmLessonName"></strong> before moving to the next lesson?</p>
      <div class="confirm-actions">
        <button class="confirm-btn confirm-btn-secondary" id="confirmCancel">Go Back</button>
        <button class="confirm-btn confirm-btn-primary" id="confirmYes">Yes, Continue</button>
      </div>
    </div>
  </div>

  <!-- ===== SCRIPT ===== -->
  <script>
    // Language toggle
    document.querySelectorAll('.lang-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
      });
    });

    // Load teacher name, course name, and role from URL params or localStorage
    const urlParams = new URLSearchParams(window.location.search);
    const teacherName = urlParams.get('teacher') || localStorage.getItem('teacherName') || 'Ayush Sharma';
    const courseName = urlParams.get('course') || localStorage.getItem('courseName') || 'Course Content';
    const userRole = urlParams.get('role') || localStorage.getItem('userRole') || 'teacher';
    if (urlParams.get('role')) localStorage.setItem('userRole', userRole);

    const tInitials = teacherName.split(' ').map(w => w[0]).join('').toUpperCase().slice(0, 2);
    document.getElementById('userName').textContent = teacherName;
    document.getElementById('userAvatar').textContent = tInitials;

    // Hide teacher info, logout, and back button for student role
    if (userRole === 'student') {
      const sidebarFooter = document.querySelector('.sidebar-footer');
      if (sidebarFooter) sidebarFooter.style.display = 'none';
      const backBtn = document.querySelector('.sidebar-back');
      if (backBtn) backBtn.style.display = 'none';
    }

    // Set course name in sidebar header, page title, and welcome heading
    document.querySelector('.sidebar-header-title').textContent = courseName;
    document.title = courseName + ' ‚Äî Mayurbhanj Initiative';
    const welcomeEl = document.getElementById('welcomeHeading');
    if (welcomeEl) welcomeEl.innerHTML = 'Welcome to<br>' + courseName;

    // Chapter accordion
    document.querySelectorAll('.chapter-toggle').forEach(toggle => {
      toggle.addEventListener('click', () => {
        const chapter = toggle.parentElement;
        const lessonList = chapter.querySelector('.lesson-list');
        const isActive = toggle.classList.contains('active');
        toggle.classList.toggle('active');
        lessonList.classList.toggle('active');
        toggle.setAttribute('aria-expanded', !isActive);
      });
    });

    // ===== DUMMY CONTENT DATABASE =====
    const lessonContent = {
      // Chapter 1: Locating Places on the Earth
      'Video': {
        type: 'video',
        embedUrl: 'https://www.youtube.com/embed/dBnVEEOmAzI',
        thumbnail: 'https://images.unsplash.com/photo-1524661135-423995f22d0b?w=900&h=500&fit=crop&q=80',
        description: 'Watch this introductory video on how to locate places on the Earth using maps, globes, and coordinate systems. This video covers the fundamentals of geographic positioning.',
        duration: '12:34'
      },
      'Chapter Teaching Plan': {
        type: 'doc',
        content: `
          <h3>Chapter 1: Locating Places on the Earth</h3>
          <p><strong>Learning Objectives:</strong></p>
          <ul>
            <li>Understand the concept of maps and globes</li>
            <li>Learn about different types of maps</li>
            <li>Understand latitudes and longitudes</li>
            <li>Learn how to locate places using coordinates</li>
          </ul>
          <p><strong>Total Duration:</strong> 8-10 class periods</p>
          <div class="slide-image"><img src="https://images.unsplash.com/photo-1580582932707-520aed937b7b?w=700&h=280&fit=crop&q=80" alt="Classroom teaching" loading="lazy"></div>
          <h4>Session Plan</h4>
          <table>
            <tr><th>Session</th><th>Topic</th><th>Activity</th></tr>
            <tr><td>1-2</td><td>Introduction to Maps</td><td>Map reading exercise</td></tr>
            <tr><td>3-4</td><td>Scale and Distance</td><td>Calculate distances on a map</td></tr>
            <tr><td>5-6</td><td>Directions and Symbols</td><td>Compass activity</td></tr>
            <tr><td>7-8</td><td>Latitudes and Longitudes</td><td>Globe exercise</td></tr>
            <tr><td>9-10</td><td>Revision & Assessment</td><td>Worksheet + Quiz</td></tr>
          </table>
          <h4>Materials Required</h4>
          <ul>
            <li>Globe and Atlas</li>
            <li>Compass and Ruler</li>
            <li>Printed worksheets</li>
            <li>Wall map of India and the world</li>
          </ul>
          <h4>Assessment Strategy</h4>
          <ul>
            <li>Oral quiz after each session</li>
            <li>Worksheet completion and grading</li>
            <li>Map drawing activity ‚Äî students draw and label a map of their locality</li>
            <li>End-of-chapter written test (20 marks)</li>
          </ul>
        `
      },
      'Lesson 1: Maps and Its Types': {
        type: 'doc',
        content: `
          <h3>Maps and Its Types</h3>
          <div class="doc-meta">Chapter 1 ‚Äî Lesson 1 | Estimated reading time: 15 min</div>
          <h4>What is a Map?</h4>
          <p>A map is a representation or a drawing of the earth's surface or a part of it, drawn on a flat surface according to a scale. Maps are essential tools for understanding geographic information and navigating the world.</p>
          <div class="slide-image"><img src="https://images.unsplash.com/photo-1524661135-423995f22d0b?w=700&h=300&fit=crop&q=80" alt="World Map" loading="lazy"></div>
          <h4>Types of Maps</h4>
          <div class="info-card"><strong>1. Physical Maps</strong> ‚Äî Show natural features like mountains, rivers, plateaus, and plains. They use colours to represent elevation: green for lowlands, brown for highlands, and blue for water bodies.</div>
          <div class="info-card"><strong>2. Political Maps</strong> ‚Äî Show boundaries of countries, states, cities, and towns. They typically use different colours for different administrative areas.</div>
          <div class="info-card"><strong>3. Thematic Maps</strong> ‚Äî Focus on specific information such as road maps, rainfall maps, population distribution maps, or forest cover maps.</div>
          <h4>Components of a Map</h4>
          <ul>
            <li><strong>Title:</strong> Tells what the map is about</li>
            <li><strong>Scale:</strong> The ratio between the actual distance and the distance shown on the map</li>
            <li><strong>Direction:</strong> Usually indicated by a compass rose or North arrow</li>
            <li><strong>Legend/Key:</strong> Explains the symbols used on the map</li>
            <li><strong>Grid System:</strong> Network of lines to locate places accurately</li>
          </ul>
          <h4>Key Takeaway</h4>
          <p>Maps are invaluable tools for representing geographical information. Understanding the three main types ‚Äî physical, political, and thematic ‚Äî helps us choose the right map for the right purpose.</p>
        `
      },
      'Lesson 2: Scale and Distance': {
        type: 'doc',
        content: `
          <h3>Scale and Distance</h3>
          <div class="doc-meta">Chapter 1 ‚Äî Lesson 2 | Estimated reading time: 12 min</div>
          <h4>What is Scale?</h4>
          <p>Scale is the ratio between the distance on a map and the actual distance on the ground. It helps us calculate real-world distances using a map.</p>
          <div class="slide-image"><img src="https://images.unsplash.com/photo-1526778548025-fa2f459cd5c1?w=700&h=300&fit=crop&q=80" alt="Map with scale" loading="lazy"></div>
          <h4>Types of Scale</h4>
          <div class="info-card"><strong>Statement Scale:</strong> Expressed in words, e.g., "1 cm represents 10 km"</div>
          <div class="info-card"><strong>Representative Fraction (RF):</strong> Expressed as a ratio, e.g., 1:100,000 meaning 1 unit on the map equals 100,000 units on the ground</div>
          <div class="info-card"><strong>Graphical/Linear Scale:</strong> A line drawn on the map divided into primary and secondary divisions</div>
          <h4>Practice Problems</h4>
          <ol>
            <li>If the scale is 1 cm = 5 km, and two cities are 3.5 cm apart on the map, what is the actual distance? <em>Answer: 17.5 km</em></li>
            <li>On a map with RF 1:50,000, two points are 8 cm apart. Find the actual distance. <em>Answer: 4 km</em></li>
          </ol>
          <h4>Large Scale vs Small Scale Maps</h4>
          <p><strong>Large scale maps</strong> (e.g., 1:5,000) show smaller areas with more detail ‚Äî useful for city plans. <strong>Small scale maps</strong> (e.g., 1:10,000,000) show larger areas with less detail ‚Äî useful for world maps and atlases.</p>
        `
      },
      'Lesson 3: Directions and Symbols': {
        type: 'doc',
        content: `
          <h3>Directions and Symbols</h3>
          <div class="doc-meta">Chapter 1 ‚Äî Lesson 3 | Estimated reading time: 10 min</div>
          <h4>Cardinal Directions</h4>
          <p>The four main directions are North, South, East, and West. Between them lie the intermediate directions: North-East, North-West, South-East, and South-West.</p>
          <h4>The Compass</h4>
          <p>A compass is a device with a magnetic needle that always points towards the magnetic North Pole. It helps travellers and map readers find directions accurately.</p>
          <div class="slide-image"><img src="https://images.unsplash.com/photo-1504802469493-cad9b622c4f7?w=700&h=300&fit=crop&q=80" alt="Compass" loading="lazy"></div>
          <h4>Conventional Symbols</h4>
          <p>Maps use standard symbols to represent features. Some common ones include:</p>
          <table>
            <tr><th>Symbol</th><th>Feature</th></tr>
            <tr><td>Blue lines</td><td>Rivers and streams</td></tr>
            <tr><td>Green patches</td><td>Forests and vegetation</td></tr>
            <tr><td>Black dots</td><td>Cities and settlements</td></tr>
            <tr><td>Red/Yellow lines</td><td>Roads and highways</td></tr>
            <tr><td>Brown contours</td><td>Mountains and elevation</td></tr>
            <tr><td>Crossed swords</td><td>Historic battle sites</td></tr>
          </table>
          <p>Using standardized symbols ensures that maps can be read universally, regardless of the language of the reader.</p>
        `
      },
      'External: Interactive Map Explorer': {
        type: 'link',
        url: 'https://www.google.com/maps',
        title: 'Interactive Map Explorer',
        description: 'Explore an interactive world map to practice locating places, measuring distances, and understanding geographical features. Use the satellite view to identify physical features like mountains, rivers, and deserts.',
        instructions: [
          'Open the link and search for India on the map',
          'Zoom into your state and locate your district',
          'Switch between Map and Satellite views to observe physical features',
          'Use the measure tool to calculate distances between cities',
          'Identify at least 5 physical features (rivers, mountains, etc.)'
        ]
      },
      'Worksheet 1: Maps, Types of Maps, Components of Maps': {
        type: 'doc',
        content: `
          <h3>Worksheet 1: Maps, Types of Maps, Components of Maps</h3>
          <div class="doc-meta">Chapter 1 ‚Äî Worksheet | Total Marks: 20</div>
          <h4>Section A: Fill in the Blanks (5 marks)</h4>
          <ol>
            <li>A __________ map shows natural features of the earth's surface.</li>
            <li>The __________ of a map tells us what the map is about.</li>
            <li>A map that shows boundaries of countries is called a __________ map.</li>
            <li>The ratio between distance on a map and actual distance is called __________.</li>
            <li>A __________ explains the symbols used in a map.</li>
          </ol>
          <h4>Section B: Short Answer Questions (10 marks)</h4>
          <ol>
            <li>Define a map and explain why maps are important. (3 marks)</li>
            <li>Differentiate between physical and political maps with examples. (3 marks)</li>
            <li>List the four essential components of a map. (2 marks)</li>
            <li>What is a thematic map? Give two examples. (2 marks)</li>
          </ol>
          <h4>Section C: Draw and Label (5 marks)</h4>
          <p>Draw a simple map of your school campus. Include a title, scale, compass direction, and a legend with at least 5 symbols.</p>
        `
      },
      'Lesson 4: Latitudes and Longitudes': {
        type: 'doc',
        content: `
          <h3>Latitudes and Longitudes</h3>
          <div class="doc-meta">Chapter 1 ‚Äî Lesson 4 | Estimated reading time: 18 min</div>
          <h4>What are Latitudes?</h4>
          <p>Latitudes are imaginary horizontal lines that run east to west around the Earth. The Equator (0¬∞) divides the Earth into the Northern and Southern Hemispheres.</p>
          <div class="slide-image"><img src="https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=700&h=300&fit=crop&q=80" alt="Globe showing latitudes" loading="lazy"></div>
          <h4>Important Lines of Latitude</h4>
          <div class="info-card"><strong>Equator (0¬∞)</strong> ‚Äî The largest circle, dividing Earth into two halves</div>
          <div class="info-card"><strong>Tropic of Cancer (23.5¬∞N)</strong> ‚Äî Passes through central India</div>
          <div class="info-card"><strong>Tropic of Capricorn (23.5¬∞S)</strong> ‚Äî Located in the Southern Hemisphere</div>
          <div class="info-card"><strong>Arctic Circle (66.5¬∞N)</strong> ‚Äî Marks the boundary of polar regions in the North</div>
          <div class="info-card"><strong>Antarctic Circle (66.5¬∞S)</strong> ‚Äî Marks the boundary of polar regions in the South</div>
          <h4>What are Longitudes?</h4>
          <p>Longitudes are imaginary vertical lines running from the North Pole to the South Pole. The Prime Meridian (0¬∞) passes through Greenwich, England, and divides Earth into the Eastern and Western Hemispheres.</p>
          <h4>Heat Zones of the Earth</h4>
          <ul>
            <li><strong>Torrid Zone:</strong> Between the Tropics ‚Äî hot throughout the year</li>
            <li><strong>Temperate Zone:</strong> Between Tropics and Polar Circles ‚Äî moderate climate</li>
            <li><strong>Frigid Zone:</strong> Beyond Polar Circles ‚Äî extremely cold</li>
          </ul>
        `
      },
      'Video: Latitudes & Longitudes Explained': {
        type: 'video',
        embedUrl: 'https://www.youtube.com/embed/swKBi6hHHMA',
        thumbnail: 'https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=900&h=500&fit=crop&q=80',
        description: 'A detailed visual explanation of the latitude and longitude coordinate system. Learn how to read coordinates, understand heat zones, and locate any place on Earth using the grid system.',
        duration: '18:22'
      },
      'Worksheet 2: Latitudes and Longitudes': {
        type: 'doc',
        content: `
          <h3>Worksheet 2: Latitudes and Longitudes</h3>
          <div class="doc-meta">Chapter 1 ‚Äî Worksheet | Total Marks: 15</div>
          <h4>Section A: Multiple Choice (5 marks)</h4>
          <ol>
            <li>The Equator is located at: (a) 90¬∞N (b) 0¬∞ (c) 23.5¬∞N (d) 66.5¬∞S</li>
            <li>The Tropic of Cancer passes through: (a) Mumbai (b) Delhi (c) Kolkata (d) Ranchi</li>
            <li>The total number of longitudes is: (a) 180 (b) 360 (c) 90 (d) 181</li>
            <li>The Prime Meridian passes through: (a) Paris (b) Greenwich (c) Washington (d) Tokyo</li>
            <li>The Torrid Zone lies between: (a) Arctic & Antarctic circles (b) Tropic of Cancer & Capricorn (c) 0¬∞ and 90¬∞ (d) Poles</li>
          </ol>
          <h4>Section B: Identify on a Globe (5 marks)</h4>
          <p>Mark the following on a blank globe/world outline map: Equator, Tropic of Cancer, Tropic of Capricorn, Prime Meridian, International Date Line.</p>
          <h4>Section C: Answer Briefly (5 marks)</h4>
          <ol>
            <li>Why does the Torrid Zone receive the most heat? (2 marks)</li>
            <li>Explain the difference between latitude and longitude. (3 marks)</li>
          </ol>
        `
      },
      'Lesson 5: Importance of Latitudes and Longitudes': {
        type: 'doc',
        content: `
          <h3>Importance of Latitudes and Longitudes</h3>
          <div class="doc-meta">Chapter 1 ‚Äî Lesson 5 | Estimated reading time: 12 min</div>
          <h4>Why are Latitudes Important?</h4>
          <ul>
            <li>They help determine the <strong>climate</strong> and <strong>temperature</strong> of a region</li>
            <li>They define the <strong>heat zones</strong> of the Earth</li>
            <li>They help in <strong>navigation</strong> and locating places accurately</li>
            <li>They influence <strong>agriculture</strong> ‚Äî certain crops grow in specific latitudinal zones</li>
          </ul>
          <h4>Why are Longitudes Important?</h4>
          <ul>
            <li>They help calculate <strong>time differences</strong> between places</li>
            <li>They establish <strong>time zones</strong> around the world</li>
            <li>Combined with latitudes, they provide <strong>exact coordinates</strong> of any location on Earth</li>
            <li>They are essential for <strong>GPS technology</strong> and modern navigation</li>
          </ul>
          <h4>Practical Application</h4>
          <p>India's coordinates range from approximately 8¬∞N to 37¬∞N latitude and 68¬∞E to 97¬∞E longitude. The Indian Standard Time (IST) is calculated from the 82.5¬∞E longitude, which passes through Mirzapur in Uttar Pradesh.</p>
        `
      },
      'External: World Time Zone Map': {
        type: 'link',
        url: 'https://www.timeanddate.com/time/map/',
        title: 'World Time Zone Map',
        description: 'Explore an interactive world time zone map. Understand how longitude determines time zones and why the International Date Line exists. Compare current times across different countries.',
        instructions: [
          'Observe how the world is divided into 24 time zones',
          'Find the time difference between India (IST) and London (GMT)',
          'Locate the International Date Line on the map',
          'Calculate the time in New York when it is 3:00 PM in India',
          'Note which countries span multiple time zones'
        ]
      },
      'Lesson 6: International Date Line and Global Time': {
        type: 'doc',
        content: `
          <h3>International Date Line and Global Time</h3>
          <div class="doc-meta">Chapter 1 ‚Äî Lesson 6 | Estimated reading time: 14 min</div>
          <h4>Standard Time and Time Zones</h4>
          <p>The Earth rotates 360¬∞ in 24 hours, which means it rotates 15¬∞ every hour. This is the basis for dividing the world into 24 time zones, each covering 15¬∞ of longitude.</p>
          <h4>Greenwich Mean Time (GMT)</h4>
          <p>The time at the Prime Meridian (0¬∞) is known as Greenwich Mean Time. All other time zones are calculated as hours ahead (+) or behind (‚àí) GMT.</p>
          <h4>Indian Standard Time (IST)</h4>
          <p>India follows a single time zone: IST = GMT + 5:30. The standard meridian of India is 82¬∞30'E, which passes through Mirzapur, Uttar Pradesh.</p>
          <h4>The International Date Line (IDL)</h4>
          <p>The International Date Line is an imaginary line at approximately 180¬∞ longitude. It zigzags to avoid passing through land areas.</p>
          <div class="info-card"><strong>Crossing the IDL eastward</strong> ‚Üí The date goes back by one day (e.g., Tuesday becomes Monday)</div>
          <div class="info-card"><strong>Crossing the IDL westward</strong> ‚Üí The date advances by one day (e.g., Monday becomes Tuesday)</div>
          <h4>Did You Know?</h4>
          <p>Russia spans 11 time zones ‚Äî the most of any country! China, despite its vast size, uses only one time zone (Beijing Time).</p>
        `
      },
      'Worksheet 3: Time and Time Zones': {
        type: 'doc',
        content: `
          <h3>Worksheet 3: Time and Time Zones</h3>
          <div class="doc-meta">Chapter 1 ‚Äî Worksheet | Total Marks: 15</div>
          <h4>Section A: Calculate the Time (8 marks)</h4>
          <ol>
            <li>If it is 12:00 noon at Greenwich, what time is it in India (IST)? (2 marks)</li>
            <li>A city is located at 75¬∞E. If GMT is 6:00 AM, find the local time. (2 marks)</li>
            <li>Two places are at 30¬∞E and 90¬∞E. What is the time difference? (2 marks)</li>
            <li>A flight departs London at 10:00 AM GMT and takes 8 hours. What is the arrival time in IST? (2 marks)</li>
          </ol>
          <h4>Section B: True or False (3 marks)</h4>
          <ol>
            <li>The Earth completes one rotation in 12 hours.</li>
            <li>Crossing the IDL from east to west advances the date by one day.</li>
            <li>India has two standard time zones.</li>
          </ol>
          <h4>Section C: Answer in Detail (4 marks)</h4>
          <p>Explain why the International Date Line is not a straight line. What would happen if a country were split by the IDL? (4 marks)</p>
        `
      },
      // Chapter 2
      'Lesson 1: Unity in Diversity': {
        type: 'doc',
        content: `
          <h3>Unity in Diversity</h3>
          <div class="doc-meta">Chapter 2 ‚Äî Lesson 1 | Estimated reading time: 14 min</div>
          <h4>India: A Land of Diversity</h4>
          <p>India is a land of remarkable diversity ‚Äî in languages, religions, customs, food, clothing, and geography. Despite these differences, Indians share a sense of unity and belonging.</p>
          <h4>Types of Diversity</h4>
          <div class="info-card"><strong>Linguistic Diversity:</strong> India has 22 officially recognized languages and hundreds of dialects. Hindi, Bengali, Telugu, Marathi, and Tamil are among the most widely spoken.</div>
          <div class="info-card"><strong>Religious Diversity:</strong> India is home to Hinduism, Islam, Christianity, Sikhism, Buddhism, Jainism, and many other faiths.</div>
          <div class="info-card"><strong>Cultural Diversity:</strong> Festivals, dance forms, music, art, and cuisine vary vastly across regions.</div>
          <div class="info-card"><strong>Geographic Diversity:</strong> From the Himalayas to coastal plains, deserts to rainforests ‚Äî India's geography is incredibly varied.</div>
          <h4>What Unites Us?</h4>
          <ul>
            <li>The Constitution of India guarantees equal rights to all citizens</li>
            <li>The national flag, anthem, and emblem symbolize our unity</li>
            <li>Shared history and freedom struggle bind the nation together</li>
            <li>Festivals like Independence Day and Republic Day celebrate national unity</li>
          </ul>
        `
      },
      'Lesson 2: Diversity and Discrimination': {
        type: 'doc',
        content: `
          <h3>Diversity and Discrimination</h3>
          <div class="doc-meta">Chapter 2 ‚Äî Lesson 2 | Estimated reading time: 12 min</div>
          <h4>Understanding Prejudice and Stereotypes</h4>
          <p>A <strong>prejudice</strong> is a pre-formed opinion about a person or group without adequate knowledge. A <strong>stereotype</strong> is an oversimplified, fixed idea about a group of people.</p>
          <h4>Forms of Discrimination</h4>
          <ul>
            <li><strong>Caste-based discrimination:</strong> Historically, certain castes faced social exclusion and untouchability</li>
            <li><strong>Gender discrimination:</strong> Unequal treatment based on gender</li>
            <li><strong>Religious discrimination:</strong> Prejudice against people of a particular faith</li>
            <li><strong>Economic discrimination:</strong> Treating people differently based on their wealth or poverty</li>
          </ul>
          <h4>Constitutional Safeguards</h4>
          <p>The Indian Constitution prohibits discrimination on the basis of religion, race, caste, sex, or place of birth (Article 15). It also abolishes untouchability (Article 17) and guarantees equality before the law (Article 14).</p>
          <h4>What Can We Do?</h4>
          <p>Respect everyone regardless of their background. Challenge stereotypes when you encounter them. Learn about different cultures to build understanding and empathy.</p>
        `
      },
      'External: Cultural Diversity Resources': {
        type: 'link',
        url: 'https://www.incredibleindia.org',
        title: 'Incredible India ‚Äî Cultural Diversity',
        description: 'Explore the rich cultural heritage of India through this official tourism portal. Discover festivals, art forms, cuisines, and traditions from every state and region of India.',
        instructions: [
          'Browse through the "Experiences" section to learn about different cultural activities',
          'Select any 3 states and note their unique festivals and traditions',
          'Compare the traditional clothing of North and South India',
          'Research one folk dance from Odisha (like Chhau or Gotipua)',
          'Write a short paragraph about what makes India culturally unique'
        ]
      },
      // Chapter 3
      'Lesson 1: Panchayati Raj': {
        type: 'doc',
        content: `
          <h3>Panchayati Raj</h3>
          <div class="doc-meta">Chapter 3 ‚Äî Lesson 1 | Estimated reading time: 15 min</div>
          <h4>What is Panchayati Raj?</h4>
          <p>Panchayati Raj is a system of local self-government in rural India. It was constitutionalized by the 73rd Amendment Act of 1992 to bring democracy to the grassroots level.</p>
          <h4>Three-Tier Structure</h4>
          <div class="info-card"><strong>Gram Panchayat (Village Level)</strong> ‚Äî The basic unit. The Sarpanch is the elected head. The Gram Sabha (village assembly) includes all adult voters.</div>
          <div class="info-card"><strong>Panchayat Samiti (Block Level)</strong> ‚Äî Coordinates between the Gram Panchayats and the Zila Parishad. Headed by a Chairman.</div>
          <div class="info-card"><strong>Zila Parishad (District Level)</strong> ‚Äî The highest tier of Panchayati Raj. Headed by a Chairperson and responsible for district-level planning.</div>
          <h4>Functions of the Gram Panchayat</h4>
          <ul>
            <li>Maintenance of roads, drains, and village infrastructure</li>
            <li>Supply of drinking water</li>
            <li>Management of common property resources</li>
            <li>Running primary schools and health centres</li>
            <li>Implementation of government welfare schemes</li>
          </ul>
          <h4>Reservation in Panchayats</h4>
          <p>One-third of all seats are reserved for women. Seats are also reserved for SC/ST communities proportional to their population in the area.</p>
        `
      },
      'Lesson 2: Rural Administration': {
        type: 'doc',
        content: `
          <h3>Rural Administration</h3>
          <div class="doc-meta">Chapter 3 ‚Äî Lesson 2 | Estimated reading time: 12 min</div>
          <h4>The Role of the Patwari</h4>
          <p>The Patwari (also called Lekhpal or Village Accountant) maintains land records of a village or a group of villages. They record crop details, land ownership changes, and assist in revenue collection.</p>
          <h4>The Tehsildar</h4>
          <p>The Tehsildar supervises the Patwari's work and is responsible for land revenue administration at the tehsil/taluka level. They also handle land dispute resolution and issue important certificates.</p>
          <h4>The District Collector</h4>
          <p>The District Collector (DC) or District Magistrate (DM) is the senior-most administrative officer at the district level. Their responsibilities include law and order, revenue collection, and coordination of development programs.</p>
          <h4>How Rural Disputes are Resolved</h4>
          <ul>
            <li>Minor disputes can be resolved by the Gram Panchayat</li>
            <li>Land disputes are handled by the Patwari and Tehsildar</li>
            <li>Police stations handle criminal complaints</li>
            <li>Courts provide the final legal resolution</li>
          </ul>
        `
      },
      'External: Panchayati Raj Portal': {
        type: 'link',
        url: 'https://panchayat.gov.in',
        title: 'Ministry of Panchayati Raj',
        description: 'Visit the official portal of the Ministry of Panchayati Raj, Government of India, to learn about ongoing rural governance initiatives, schemes, and the structure of local self-government.',
        instructions: [
          'Explore the "About Panchayati Raj" section for an overview',
          'Look up key schemes like MGNREGA and their implementation through Panchayats',
          'Find information about your state\'s Panchayat structure',
          'List 3 recent initiatives for strengthening rural governance',
          'Note the difference between the roles of Sarpanch and BDO'
        ]
      },
      // Chapter 4
      'Lesson 1: Livelihoods and Occupations': {
        type: 'doc',
        content: `
          <h3>Livelihoods and Occupations</h3>
          <div class="doc-meta">Chapter 4 ‚Äî Lesson 1 | Estimated reading time: 14 min</div>
          <h4>Primary Activities</h4>
          <p>Primary activities involve directly extracting resources from the earth. These include:</p>
          <ul>
            <li><strong>Agriculture:</strong> Farming of crops ‚Äî the backbone of India's rural economy</li>
            <li><strong>Fishing:</strong> Both freshwater and marine fishing provide livelihood to millions</li>
            <li><strong>Mining:</strong> Extraction of minerals like coal, iron ore, and bauxite</li>
            <li><strong>Forestry:</strong> Collection of timber, bamboo, honey, and medicinal herbs</li>
          </ul>
          <h4>Secondary Activities</h4>
          <p>Secondary activities transform raw materials into finished goods:</p>
          <div class="info-card"><strong>Manufacturing:</strong> Textiles, steel, automobiles, electronics, and food processing</div>
          <div class="info-card"><strong>Construction:</strong> Building houses, roads, bridges, and infrastructure</div>
          <h4>Tertiary Activities</h4>
          <p>Tertiary activities provide services rather than goods:</p>
          <ul>
            <li>Teaching, healthcare, banking, transportation, and communication</li>
            <li>IT services and software development ‚Äî India is a global leader</li>
            <li>Tourism and hospitality</li>
          </ul>
          <h4>Occupations in Mayurbhanj</h4>
          <p>Mayurbhanj district in Odisha has a diverse economic base: agriculture (rice, pulses), minor forest produce, tribal handicrafts, and small-scale industries. Tourism around Simlipal National Park also provides employment.</p>
        `
      },
      'External: Economic Survey of India': {
        type: 'link',
        url: 'https://www.indiabudget.gov.in',
        title: 'Economic Survey of India',
        description: 'Access the Economic Survey published by the Ministry of Finance to understand India\'s economic activities, growth sectors, employment data, and development indicators.',
        instructions: [
          'Browse the highlights of the latest Economic Survey',
          'Find the percentage of India\'s GDP from agriculture vs. services',
          'Note the employment distribution across primary, secondary, and tertiary sectors',
          'Research which states have the highest agricultural output',
          'Summarize 3 key economic challenges facing rural India'
        ]
      }
    };

    // Split HTML content into pages by h4 headings
    function splitIntoPages(html, title) {
      const temp = document.createElement('div');
      temp.innerHTML = html;
      const pages = [];
      let currentPage = [];
      let pageTitle = title;

      // First page always starts with the doc title
      const children = Array.from(temp.children);
      children.forEach(el => {
        if (el.tagName === 'H4' && currentPage.length > 0) {
          pages.push(currentPage.join(''));
          currentPage = [];
        }
        currentPage.push(el.outerHTML);
      });
      if (currentPage.length > 0) pages.push(currentPage.join(''));
      return pages.length > 0 ? pages : [html];
    }

    // Get icon SVG for type
    function getTypeIcon(type) {
      if (type === 'video') return '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"/></svg>';
      if (type === 'link') return '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>';
      return '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="9" y1="13" x2="15" y2="13"/><line x1="9" y1="17" x2="13" y2="17"/></svg>';
    }

    // Strip doc-meta divs from content
    function stripMeta(html) {
      return html.replace(/<div class="doc-meta">[\s\S]*?<\/div>/g, '');
    }

    // Generate paginated content
    function generateContentHTML(lessonName, data) {
      const icon = getTypeIcon(data ? data.type : 'doc');
      let pages = [];

      if (!data) {
        pages = ['<p>Content for <strong>' + lessonName + '</strong> will be available soon.</p>'];
      } else if (data.type === 'video') {
        // Use custom education thumbnail or fallback to YouTube thumbnail
        const vidMatch = data.embedUrl.match(/embed\/([^?&]+)/);
        const vidId = vidMatch ? vidMatch[1] : '';
        const thumbUrl = data.thumbnail || (vidId ? 'https://img.youtube.com/vi/' + vidId + '/maxresdefault.jpg' : '');
        pages = [
          '<div class="video-container" id="videoBox">' +
            '<div class="video-thumbnail" id="videoThumb" onclick="playVideo()">' +
              '<img src="' + thumbUrl + '" alt="Video thumbnail">' +
              '<div class="play-btn"><svg width="32" height="32" viewBox="0 0 24 24" fill="white"><polygon points="6 3 20 12 6 21 6 3"/></svg></div>' +
            '</div>' +
            '<iframe class="video-iframe" id="videoFrame" src="" data-src="' + data.embedUrl + '?autoplay=1" title="Video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="display:none;"></iframe>' +
          '</div>',
          '<h4>About this Video</h4><p>' + data.description + '</p><p><strong>Duration:</strong> ' + data.duration + '</p>'
        ];
      } else if (data.type === 'link') {
        const instrItems = data.instructions.map(i => '<li>' + i + '</li>').join('');
        pages = [
          '<div class="link-card"><div class="link-card-header"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--green-primary)" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg><div><h4>' + data.title + '</h4><a href="' + data.url + '" target="_blank" rel="noopener">' + data.url + '</a></div></div><p>' + data.description + '</p></div>',
          '<h4>Activity Instructions</h4><ol class="instructions-list">' + instrItems + '</ol>'
        ];
      } else {
        pages = splitIntoPages(stripMeta(data.content), lessonName);
      }

      const totalPages = pages.length;
      let slidesHTML = pages.map((p, i) => '<div class="slide' + (i === 0 ? ' active' : '') + '" data-page="' + i + '"><div class="slide-body lesson-doc-body">' + p + '</div></div>').join('');

      let dotsHTML = pages.map((_, i) => '<button class="slide-dot' + (i === 0 ? ' active' : '') + '" data-page="' + i + '"></button>').join('');

      return `
        <div class="lesson-content">
          <div class="lesson-content-header">
            <span class="lesson-header-icon">${icon}</span>
            <div class="lesson-header-info">
              <h2 class="lesson-content-title">${lessonName}</h2>
            </div>
          </div>
          <div class="lesson-content-body">
            <div class="slide-viewer">
              <div class="slide-container">${slidesHTML}</div>
              <div class="slide-nav">
                <button class="slide-btn slide-btn-prev" disabled>Previous</button>
                <div class="slide-dots">${dotsHTML}<span class="slide-counter">1 / ${totalPages}</span></div>
                <button class="slide-btn slide-btn-next" ${totalPages <= 1 ? 'disabled' : ''}>Next</button>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    // Play video ‚Äî remove thumbnail and load iframe
    function playVideo() {
      const thumb = document.getElementById('videoThumb');
      const frame = document.getElementById('videoFrame');
      if (thumb && frame) {
        thumb.style.display = 'none';
        frame.src = frame.dataset.src;
        frame.style.display = 'block';
      }
    }

    // Initialize slide navigation after rendering
    function initSlideNav() {
      const slides = document.querySelectorAll('.slide');
      const dots = document.querySelectorAll('.slide-dot');
      const prevBtn = document.querySelector('.slide-btn-prev');
      const nextBtn = document.querySelector('.slide-btn-next');
      const counter = document.querySelector('.slide-counter');
      if (!slides.length) return;

      let current = 0;
      const total = slides.length;

      function goTo(idx) {
        if (idx < 0 || idx >= total) return;
        slides.forEach(s => s.classList.remove('active'));
        dots.forEach(d => d.classList.remove('active'));
        slides[idx].classList.add('active');
        dots[idx].classList.add('active');
        current = idx;
        prevBtn.disabled = current === 0;
        nextBtn.disabled = current === total - 1;
        counter.textContent = (current + 1) + ' / ' + total;
        // Scroll slide container to top
        const container = document.querySelector('.slide-container');
        if (container) container.scrollTop = 0;
      }

      prevBtn.addEventListener('click', () => goTo(current - 1));
      nextBtn.addEventListener('click', () => goTo(current + 1));
      dots.forEach(dot => {
        dot.addEventListener('click', () => goTo(parseInt(dot.dataset.page)));
      });
    }

    // Confirmation modal logic
    const confirmModal = document.getElementById('confirmModal');
    const confirmLessonName = document.getElementById('confirmLessonName');
    const confirmCancel = document.getElementById('confirmCancel');
    const confirmYes = document.getElementById('confirmYes');
    let currentActiveLesson = null;

    function showConfirm(lessonName, callback) {
      confirmLessonName.textContent = currentActiveLesson || 'the current lesson';
      confirmModal.classList.add('active');
      document.body.style.overflow = 'hidden';
      confirmYes.onclick = () => { closeConfirm(); callback(); };
      confirmCancel.onclick = () => { closeConfirm(); };
    }

    function closeConfirm() {
      confirmModal.classList.remove('active');
      document.body.style.overflow = '';
    }

    confirmModal.addEventListener('click', (e) => { if (e.target === confirmModal) closeConfirm(); });
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeConfirm(); });

    function loadLesson(item) {
      document.querySelectorAll('.lesson-item').forEach(l => l.classList.remove('active'));
      item.classList.add('active');

      const lessonName = item.textContent.trim();
      currentActiveLesson = lessonName;
      const data = lessonContent[lessonName];
      const mainContent = document.getElementById('courseMain');
      mainContent.innerHTML = generateContentHTML(lessonName, data);
      mainContent.scrollTop = 0;
      initSlideNav();
    }

    // Lesson click with confirmation
    document.querySelectorAll('.lesson-item').forEach(item => {
      item.addEventListener('click', () => {
        if (currentActiveLesson && !item.classList.contains('active')) {
          showConfirm(currentActiveLesson, () => { loadLesson(item); });
        } else if (!currentActiveLesson) {
          loadLesson(item);
        }
      });
    });
  </script>

</body>
</html>
